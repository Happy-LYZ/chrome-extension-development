{"version":3,"file":"7.b8b924320bca5527ce04.hot-update.js","sources":["webpack:///app/background.js"],"sourcesContent":["import Options from './utils/options';\nimport animateIcon from './utils/animateIcon';\n\nconst chrome = window.chrome;\n\n//将Options操作对象添加到window域下，以供扩展其它部分访问\nwindow.extensionOptions = Options;\n\nchrome.runtime.onMessage.addListener((data, sender, sendResponse) => {\n    switch (data.action) {\n        case 'executeScript':\n            chrome.tabs.executeScript(null, { code: data.code });\n            break;\n        case 'insertCSS':\n            chrome.tabs.insertCSS(null, { code: data.code });\n            break;\n\n        case 'getOption':\n            sendResponse(Options.get(data.key));\n            break;\n\n        case 'setOption':\n            sendResponse(Options.set(data.key, data.value));\n            break;\n\n        case 'updateOption':\n            if (animateIcon.running !== Options.get('animateIcon')) {\n                Options.get('animateIcon') ? animateIcon.start() : animateIcon.stop();\n            }\n            break;\n\n        case 'updateWindow':\n             chrome.windows.getCurrent(null, async win => {\n                const updateWindow = function(updateInfo) {\n                    return new Promise(resolve => chrome.windows.update(win.id, updateInfo, resolve));\n                }\n                //定义一个延迟执行器\n                const delay = function(ms) {\n                    return new Promise(resolve => setTimeout(resolve, ms));\n                }\n\n                //要执行的步骤更新的窗口信息\n                for(let info of data.steps) {\n                    await updateWindow(info);\n                    await delay(1000);\n                }\n            });\n            break;\n\n        default: //nothing todo\n            break;\n    }\n});\n\nchrome.tabs.onActivated.addListener(({ tabId }) => {\n    chrome.tabs.sendMessage(tabId, {\n        action: 'active'\n    });\n});\n\nif (Options.get('animateIcon')) {\n    animateIcon.start();\n}\n\n\n\n// WEBPACK FOOTER //\n// app/background.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AAAA;AACA;AAzCA;AA2CA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}